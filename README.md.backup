# CodegenApp - AI-Powered Development Platform

A comprehensive web application for managing Codegen agent runs with integrated web evaluation and code analysis capabilities. This platform provides a unified interface for AI-powered software development, testing, and code analysis workflows.

## ğŸš€ Key Features

### Core Agent Management
- **Agent Run Management**: Create, monitor, and manage Codegen AI agent runs
- **Organization Support**: Multi-organization workspace management
- **Real-time Updates**: Live status updates and progress tracking
- **Credential Management**: Secure API token and authentication handling

### Web Evaluation Agent Integration
- **Automated UI Testing**: Evaluate web applications using AI-powered browser automation
- **GitHub PR Testing**: Automatically test pull request deployments
- **GitHub Branch Testing**: Continuous testing of branch deployments
- **Browser State Management**: Persistent authentication and session handling
- **Comprehensive Reporting**: Detailed evaluation reports with screenshots and metrics

### Code Analysis & Visualization
- **Interactive Code Structure**: Visual exploration of repository architecture using graph-sitter
- **Multi-language Support**: Analysis for Python, JavaScript, TypeScript, Go, Rust, Java, C++, and C
- **Real-time Analysis**: Live code structure updates and dependency mapping
- **Performance Insights**: Code complexity and maintainability metrics

### CI/CD Integration
- **Automated Testing Workflows**: GitHub Actions integration for PR testing
- **Deployment Validation**: Automatic evaluation of deployed applications
- **Quality Gates**: Configurable quality checks and approval workflows
- **Multi-environment Support**: Testing across development, staging, and production

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚   Proxy Server   â”‚    â”‚   External APIs     â”‚
â”‚   (React/TS)    â”‚â—„â”€â”€â–ºâ”‚   (Node.js)      â”‚â—„â”€â”€â–ºâ”‚   - Codegen API     â”‚
â”‚                 â”‚    â”‚                  â”‚    â”‚   - GitHub API      â”‚
â”‚   - Agent UI    â”‚    â”‚   - API Proxy    â”‚    â”‚   - Deployment APIs â”‚
â”‚   - Web Eval    â”‚    â”‚   - Web Eval     â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚   - Code Viz    â”‚    â”‚   - Auth         â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
                                â”‚                        â”‚
                                â–¼                        â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Web-Eval-Agent â”‚    â”‚   Graph-Sitter      â”‚
                    â”‚   (MCP Server)   â”‚    â”‚   (Code Analysis)   â”‚
                    â”‚                  â”‚    â”‚                     â”‚
                    â”‚   - Playwright   â”‚    â”‚   - Tree-sitter     â”‚
                    â”‚   - GitHub Integ â”‚    â”‚   - AST Analysis    â”‚
                    â”‚   - AI Evaluationâ”‚    â”‚   - Dependency Map  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Component Overview

1. **Frontend Layer**: React/TypeScript application with responsive UI components
2. **Proxy Server**: Node.js middleware handling API routing and authentication
3. **Web-Eval-Agent**: MCP server providing browser automation and GitHub integration
4. **Graph-Sitter**: Code analysis engine for repository structure visualization
5. **External Integrations**: Codegen API, GitHub API, and deployment platforms

## ğŸ”„ CI/CD Workflow Integration

The platform integrates seamlessly into modern development workflows:

```mermaid
graph LR
    A[Code Push] --> B[GitHub PR]
    B --> C[Deploy Preview]
    C --> D[Web-Eval-Agent]
    D --> E[Automated Testing]
    E --> F[Quality Report]
    F --> G[Approval/Merge]
    G --> H[Production Deploy]
    H --> I[Post-Deploy Validation]
```

### Web-Eval-Agent Role in CI/CD

1. **PR Creation**: Automatically triggered when PRs are opened
2. **Deployment Detection**: Identifies preview deployment URLs
3. **Automated Testing**: Runs comprehensive UI/UX evaluation
4. **Report Generation**: Creates detailed testing reports with screenshots
5. **Quality Gates**: Provides pass/fail recommendations for merge decisions
6. **Post-Deploy Validation**: Verifies production deployments

## ğŸ“‹ Prerequisites

- **Node.js 18+** and npm
- **Python 3.11+** (for web-eval-agent integration)
- **Codegen API token** (get one from [Codegen Dashboard](https://app.codegen.com/settings))
- **Google Gemini API key** (for web evaluation features)
- **GitHub token** (for GitHub integration features)

## ğŸ› ï¸ Installation & Setup

### 1. Clone the repository

```bash
git clone https://github.com/Zeeeepa/codegenApp.git
cd codegenApp
```

### 2. Install dependencies

```bash
npm install
```

### 3. Environment Configuration

Create a `.env` file in the project root:

```bash
# Codegen API Configuration
REACT_APP_API_TOKEN=your_codegen_api_token_here
REACT_APP_DEFAULT_ORGANIZATION=your_org_id_here
REACT_APP_API_BASE_URL=https://api.codegen.com
REACT_APP_USER_ID=your_user_id_here

# Web-Eval-Agent Configuration
GEMINI_API_KEY=your_gemini_api_key_here
GITHUB_TOKEN=your_github_token_here
WEB_EVAL_MCP_PATH=web-eval-agent
WEB_EVAL_TIMEOUT=300000
WEB_EVAL_MAX_CONCURRENT=3

# Optional: Deployment Configuration
NETLIFY_AUTH_TOKEN=your_netlify_token_here
NETLIFY_SITE_ID=your_netlify_site_id_here
```

### 4. Install Web-Eval-Agent Dependencies

```bash
# Install Python dependencies
pip install playwright python-dotenv
playwright install chromium

# Clone web-eval-agent (if not already available)
git clone https://github.com/Zeeeepa/web-eval-agent.git ../web-eval-agent
cd ../web-eval-agent
pip install -r requirements.txt
cd ../codegenApp
```

### 5. Start the development environment

```bash
# Start both frontend and backend
npm run dev

# Or start individually:
npm start              # Frontend only
npm run server:dev     # Backend only
```

The application will be available at:
- **Frontend**: `http://localhost:8000`
- **Backend API**: `http://localhost:3001`

## ğŸ”§ Development

### Available Scripts

#### Core Application
- `npm start` - Start React development server (port 8000)
- `npm run build` - Build React app for production
- `npm test` - Run React test suite
- `npm run dev` - Start both frontend and backend concurrently

#### Backend Server
- `npm run server:start` - Start production server
- `npm run server:dev` - Start development server with hot reload
- `npm run server:test` - Run backend tests

#### Web-Eval-Agent Testing
- `npm run test:web-eval` - Run web-eval-agent integration tests
- `npm run test:web-eval:watch` - Run tests in watch mode
- `npm run test:web-eval:coverage` - Run tests with coverage report
- `npm run test:all` - Run all test suites

#### Quality Assurance
- `npm run lint` - Run ESLint
- `npm run type-check` - Run TypeScript type checking
- `npm run format` - Format code with Prettier

### Project Structure

```
codegenApp/
â”œâ”€â”€ public/                     # Static assets
â”‚   â”œâ”€â”€ manifest.json          # PWA manifest
â”‚   â”œâ”€â”€ favicon.ico            # App icon
â”‚   â””â”€â”€ logo*.png              # App logos
â”œâ”€â”€ src/                       # React source code
â”‚   â”œâ”€â”€ api/                   # API client and types
â”‚   â”œâ”€â”€ components/            # React components
â”‚   â”‚   â”œâ”€â”€ WebEvalPanel.tsx   # Web evaluation interface
â”‚   â”‚   â””â”€â”€ ...                # Other UI components
â”‚   â”œâ”€â”€ hooks/                 # Custom React hooks
â”‚   â”‚   â”œâ”€â”€ useWebEval.ts      # Web evaluation hook
â”‚   â”‚   â””â”€â”€ ...                # Other hooks
â”‚   â”œâ”€â”€ utils/                 # Utility functions
â”‚   â”œâ”€â”€ storage/               # Local storage utilities
â”‚   â””â”€â”€ *.tsx                  # Main React components
â”œâ”€â”€ server/                    # Backend proxy server
â”‚   â”œâ”€â”€ index.js               # Main server file
â”‚   â”œâ”€â”€ web-eval-routes.js     # Web evaluation API routes
â”‚   â””â”€â”€ package.json           # Server dependencies
â”œâ”€â”€ tests/                     # Test suites
â”‚   â””â”€â”€ web-eval-agent/        # Web evaluation tests
â”‚       â”œâ”€â”€ unit/              # Unit tests
â”‚       â”œâ”€â”€ integration/       # Integration tests
â”‚       â”œâ”€â”€ e2e/               # End-to-end tests
â”‚       â”œâ”€â”€ fixtures/          # Test data
â”‚       â””â”€â”€ mocks/             # Mock implementations
â”œâ”€â”€ .github/                   # GitHub workflows
â”‚   â””â”€â”€ workflows/             # CI/CD pipelines
â”‚       â””â”€â”€ web-eval-pr.yml    # PR testing workflow
â”œâ”€â”€ .env                       # Environment variables
â””â”€â”€ README.md                  # This documentation
```

## âš™ï¸ Configuration

The application supports multiple configuration methods:

1. **Environment Variables** (recommended): Set `REACT_APP_*` variables in `.env` file
2. **Settings Page**: Configure credentials through the web interface
3. **LocalStorage**: Automatically saves settings for future sessions

### Environment Variable Validation

The Settings page will show the status of your environment variables:

- âœ… **Green**: All required variables are set
- âš ï¸ **Yellow**: Optional variables missing (warnings)
- âŒ **Red**: Required variables missing (will prevent API calls)

## ğŸš€ Deployment

### Frontend Deployment

The React app can be deployed to any static hosting service:

#### Vercel
```bash
npm run build
# Deploy the 'build' folder to Vercel
```

#### Netlify
```bash
npm run build
# Deploy the 'build' folder to Netlify
```

#### GitHub Pages
```bash
npm run build
# Deploy the 'build' folder to GitHub Pages
```

### Environment Variables for Production

Set these environment variables in your hosting platform:

```env
REACT_APP_API_TOKEN=your_production_api_token
REACT_APP_DEFAULT_ORGANIZATION=your_org_id
REACT_APP_API_BASE_URL=https://api.codegen.com
REACT_APP_USER_ID=your_user_id
```

## ğŸ” Authentication

1. Get your API token from the [Codegen Dashboard](https://app.codegen.com/settings)
2. Add it to your `.env` file or enter it in the application's Settings page
3. The application will validate your credentials and load your organizations

## ğŸ§ª Testing

Run the test suite to ensure everything is working correctly:

```bash
npm test
```

The test suite includes:
- Environment variable validation tests
- Component rendering tests
- API configuration tests

## ğŸ› Troubleshooting

### Missing Environment Variables

If you see errors about missing environment variables:

1. Ensure your `.env` file is in the project root
2. Restart the development server after creating/modifying `.env`
3. Check the Settings page for validation status

### API Connection Issues

If API calls are failing:

1. Verify your API token is correct
2. Check that the API base URL is accessible (`https://api.codegen.com`)
3. Ensure your organization ID is valid
4. Check browser console for detailed error messages

### Development Server Issues

- Make sure port 3000 is available
- Try restarting the server: `npm start`
- Check the console for detailed error messages

## ğŸ“ API Token Setup

1. Visit [Codegen Dashboard](https://app.codegen.com/settings)
2. Navigate to API settings
3. Generate a new API token
4. Copy the token and add it to your `.env` file or Settings page

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch: `git checkout -b feature/amazing-feature`
3. Commit your changes: `git commit -m 'Add amazing feature'`
4. Push to the branch: `git push origin feature/amazing-feature`
5. Open a Pull Request

## ğŸ“„ License

This project is licensed under the MIT License - see the LICENSE file for details.

## ğŸ†˜ Support

If you encounter any issues:

1. Check the troubleshooting section above
2. Look for existing issues in the GitHub repository
3. Create a new issue with detailed information about the problem

## ğŸ”„ Updates

To update the application:

```bash
git pull origin main
npm install  # Updates dependencies
npm start    # Restart the development server
```
